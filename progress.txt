# MindCLI Development Progress

## Phase 1: Foundation [COMPLETE]
- [x] Project setup (Go module, directory structure, dependencies)
- [x] Basic TUI (Bubble Tea model, three-panel layout, keybindings, styling)
- [x] SQLite storage (documents table schema, CRUD operations)

## Phase 2: Markdown Indexing [COMPLETE]
- [x] File Scanner
  - [x] Recursive directory walker
  - [x] File type detection
  - [x] Modification time tracking (incremental indexing)
- [x] Markdown Parser
  - [x] Extract frontmatter (YAML)
  - [x] Parse headings, links, tags
  - [x] Preserve structure for preview
- [x] Full-Text Search
  - [x] Integrate Bleve for FTS
  - [x] Implement BM25 ranking
  - [x] Wire search to TUI
- [x] Concurrent Indexing
  - [x] Worker pool with configurable size
  - [x] Progress reporting to console
  - [x] Graceful cancellation

## Phase 3: Semantic Search [COMPLETE]
- [x] Text Chunker
  - [x] Sliding window chunking with semantic boundaries (paragraphs, sentences)
  - [x] Configurable chunk size and overlap
  - [x] Position tracking for chunk-to-document mapping
- [x] Embedding Integration
  - [x] Embedder interface (Embed, EmbedBatch, Dimensions)
  - [x] Ollama HTTP client for local embedding generation
  - [x] Content-hash based SQLite embedding cache
  - [x] Graceful degradation when Ollama unavailable
- [x] Vector Storage
  - [x] HNSW index via coder/hnsw with cosine distance
  - [x] Disk persistence via SavedGraph
  - [x] Thread-safe add/delete/search operations
  - [x] Batch vector insertion
- [x] Hybrid Search
  - [x] Reciprocal Rank Fusion (RRF) combining BM25 + vector scores
  - [x] Configurable hybrid weight (0 = pure BM25, 1 = pure vector)
  - [x] Parallel BM25 and vector search execution
  - [x] Fallback to BM25-only when vectors unavailable
- [x] Pipeline Integration
  - [x] Chunking and embedding during indexing
  - [x] Hybrid search wired to TUI
  - [x] Vector store save on index completion

## Phase 4: PDF Support [COMPLETE]
- [x] PDF Parser
  - [x] Text extraction using ledongthuc/pdf
  - [x] Page-by-page text extraction
  - [x] Title from filename
  - [x] Preview generation
- [x] Integration
  - [x] PDFSource implements Source interface
  - [x] Reuses existing Scanner for file discovery
  - [x] Wired into indexer via config toggle

## Phase 5: Email Integration [COMPLETE]
- [x] Email Parsers
  - [x] Mbox format parsing (split by "From " lines)
  - [x] Maildir format (single .eml files)
  - [x] Apple Mail .emlx files (with plist stripping)
- [x] Email Processing
  - [x] Parse headers (from, to, subject, date)
  - [x] Extract body (plain text, MIME multipart)
  - [x] HTML stripping for HTML-only emails
  - [x] MIME header decoding
- [x] Integration
  - [x] EmailSource implements Source interface
  - [x] Wired into indexer via config toggle

## Phase 6: Browser History [COMPLETE]
- [x] Browser Databases
  - [x] Chrome History (WebKit timestamps)
  - [x] Firefox places.sqlite (microsecond timestamps)
  - [x] Safari History.db
- [x] History Extraction
  - [x] URL, title, visit count extraction
  - [x] Database copy to avoid locking issues
  - [x] Auto-detection of browser profile paths (macOS + Linux)
- [x] Integration
  - [x] BrowserSource implements Source interface
  - [x] Wired into indexer via config toggle

## Phase 7: Clipboard History [COMPLETE]
- [x] Clipboard Access
  - [x] Platform-specific clipboard reading via atotto/clipboard
  - [x] Content-hash based deduplication
- [x] Privacy
  - [x] Password detection heuristics (mixed character classes)
  - [x] Configurable retention period
  - [x] Skip passwords option
- [x] Integration
  - [x] ClipboardSource implements Source interface
  - [x] Wired into indexer via config toggle

## Phase 8: File Watcher [COMPLETE]
- [x] FSNotify Integration
  - [x] Watch configured directories recursively
  - [x] Debounce rapid changes (500ms window)
  - [x] Handle create/write/rename/remove events
- [x] Incremental Updates
  - [x] Re-index modified files
  - [x] Remove deleted files from index
  - [x] Watch new subdirectories automatically
- [x] Watcher skips .git, node_modules, .obsidian

## Phase 9: LLM Integration [PENDING]
## Phase 10: Polish [PENDING]
